<%- include('./templates/header')%> <%- include('./templates/navigation')%>
<link rel="stylesheet" href="/styles/admin.css" />
<main>
  <% if (locals.error) { %>
  <div class="alerts">
    <div class="alert alert-warning alert-dismissible fade show" role="alert">
      <strong>Warning!</strong> <%= error %>
      <button
        type="button"
        class="btn-close"
        data-bs-dismiss="alert"
        aria-label="Close"
      ></button>
    </div>
  </div>
  <% } %>

  <form action="/users/register" method="POST">
    <input
      type="text"
      id="username"
      name="username"
      placeholder="username"
      required
    />
    <input type="password" name="password" placeholder="Password" required />

    <select name="role" id="role">
      <option value="ADMIN">ADMIN</option>
      <option value="USER">USER</option>
    </select>
    <input type="submit" value="Register" />
  </form>
  <table class="table table-striped">
    <tr>
      <th>ID</th>
      <th>NAME</th>
      <th>ROLE</th>
      <th>DELETE</th>
    </tr>
    <% if (locals.users) { %> 
      <% locals.users.forEach((element, i) => { %>
    <tr >
      <td> <%= element.id %> </td>
      <td> <%= element.username %> </td>
      <td> <%= element.role %> </td>
      <td id="<%= i %>" class="delete" style="width: 5%;"> 
        <form action="/users/register" method="GET"">

        <button style="border: none;" class="btn" type="submit">
          <img src="/icons/trash.png" alt="">
        </button></form>
      </td>
    </tr>
    <% }) %> <% } %>
  </table>
</main>
<%- include('./templates/scripts')%>
<script src="/javaschript/register.js"></script>
<%- include('./templates/footer')%>
